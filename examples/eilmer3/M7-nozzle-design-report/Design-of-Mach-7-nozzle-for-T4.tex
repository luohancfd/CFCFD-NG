% Design-of-Mach-7-nozzle-for-T4.tex
%
\documentclass[12pt,a4paper]{article}
\usepackage[body={16cm,24.5cm}]{geometry}
\usepackage{pstricks}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{pdfpages}
\usepackage{subfig}
\usepackage{newapa}
\lstset{basicstyle=\scriptsize,identifierstyle=,keywordstyle=}

%------------------------------------------------------------------
% a couple horizontal bars to delimit embedded code
% the width suits the page size set above and
% the mathmode eliminates spaces between the three elements
\newcommand{\topbar}{\ensuremath{
    \rule{0.1mm}{2.0mm} \rule[2.0mm]{159.5mm}{0.1mm} \rule{0.1mm}{2.0mm}
}}
\newcommand{\bottombar}{\ensuremath{
    \rule{0.1mm}{2.0mm} \rule{159.5mm}{0.1mm} \rule{0.1mm}{2.0mm}
}}
\newcommand{\topbarshort}{\ensuremath{
    \rule{0.1mm}{2.0mm} \rule[2.0mm]{149.5mm}{0.1mm} \rule{0.1mm}{2.0mm}
}}
\newcommand{\bottombarshort}{\ensuremath{
    \rule{0.1mm}{2.0mm} \rule{149.5mm}{0.1mm} \rule{0.1mm}{2.0mm}
}}
%------------------------------------------------------------------

\title{
    Flowpath design of an axisymmetric \\Mach 7.0 nozzle for T4.
}
\author{
    School of Mechanical \& Mining Engineering \\   \vspace{3mm} 
    Research Report Number 2013/?? \\
    W. Y. K. Chan, M. K. Smart and P. A. Jacobs \\
    Centre for Hypersonics, The University of Queensland 
}
\date{January 2013}

\begin{document}
\maketitle

% For some reason, the abstract environment causes the labelling in
% the metapost figures to disappear; strange!
% \begin{abstract}
% \end{abstract}
\centerline{\textbf{Abstract}}
\medskip
An axisymmetric contoured nozzle tailored for specific flight conditions
of $M\,=\,7$, $p_0\,=\,6.035$\,MPa, $T_0\,=\,2432.2$\,K has been designed 
for the T4 reflected shock tunnel facility. It has a throat diameter of 
0.021\,m, a nominal exit area of 0.0586\,m$^2$ and a throat-to-exit length 
of 1\,m.

\medskip
The initial design was based on scaling an existing nozzle that was designed
for a nearby operating condition. Starting with this scaled contour for the
supersonic part of the nozzle contour, a B\`ezier curve description of the
contour was systematically perturbed to improve the estimated test flow
conditions according to a Navier-Stokes computation that included high
temperature effects.

\newpage
\tableofcontents

%---------------------------------------------------------------------------------
\newpage
\baselineskip = 1.5pc


%---------------------------------------------------------------------------------
\section{Introduction}
\label{sec:intro}
%
To facilitate the freejet testing of the HIFiRE 8 scramjet engine in the T4 shock 
tunnel facility, a new axisymmetric contoured nozzle that produces a Mach\,7 
outflow is needed. This report presents details of the design, fabrication and
testing of this new nozzle. In Section~\ref{sec:nozzle-design}, the design 
methodology that is undertaken to generate the internal flowpath of the nozzle is 
described. Section~\ref{sec:nozzle-manufacture} then summarises aspects of the 
mechanical design of the new nozzle. The technical drawings that are needed for 
the fabrication of the nozzle are included in Appendix~\ref{app:manufacturing-drawings}. 
%
%Lastly, Chapter~\ref{sec:expt-verification} 
%presents details of the experimental survey of the nozzle outflow that was 
%conducted to verify the performance of the newly-fabricated nozzle.

%
%%---------------------------------------------------------------------------------
%\section{A review of current nozzle design methodologies}
%\label{sec:lit-review}
%%
%FROM CHRIS CRADDOCK TECH REPORT. 
%The design of all of the current T4 hypersonic axisymmetric nozzles
%was based on the classical method proposed by Prandtl and Buseman [1] in 1929. The
%method uses the method of characteristics (MOC) in an inverse design mode to determine
%an inviscid nozzle wall contour that produces the desired uniform exit flow. The contour
%is then corrected with a displacement thickness obtained from a boundary-layer (BL)
%calculation to account for the boundary layer that develops along the nozzle wall. The
%underlying assumption behind this method is that the boundary layer flow and core flow
%are uncoupled.
%
%In low Mach number nozzles, where boundary layers are thin, the location where the
%flow characteristics reflect is closely approximated by the inviscid contour as assumed
%by the MOC/BL technique. However, for thick boundary layers, as developed in high
%Mach number nozzles, the flow characteristics effectively reflect between the wall and
%the inviscid contour [4] such that the actual characteristic lags the design characteristic as
%shown in Fig. 1. Hypersonic nozzles designed for Mach numbers of 7 to 8 begin to show
%this effect where turbulent boundary layers grow to a large percentage of the exit radius
%[3]. As a direct consequence of the miscalculation of characteristic reflection, complete
%cancellation of expansion waves is no longer achieved and disturbances are introduced
%into the test flow at the nozzle exit.
%
%A relatively new nozzle design method that correctly models the interaction between
%the core flow and the boundary layer in high Mach number nozzles where the boundary
%layer becomes thick, involves coupling a computational flow solver and an optimization
%algorithm [16, 15, 22]. Computational flow solvers based on the Navier-Stokes equations
%can be used to calculate accurate flow solutions for a given nozzle design. The flow
%solution and nozzle contour can then be forwarded to an optimization algorithm that iteratively
%perturbs the contour until the desired exit flow is achieved. The accuracy of the
%design method is limited only by the accuracy of the flow solver used to perform the flowfield
%calculations. Also, the design method is not limited to axisymmetric nozzles since
%it can be used for designing three-dimensional square cross-section nozzles by simply
%employing a three-dimensional flow solver.
%
%The optimization design method is used in this study to design a new nozzle for the
%T4 shock tunnel. The primary motivation for designing a new nozzle is the “HyShot”
%scramjet experiment. The HyShot scramjet experiment consists of a flight test and a series
%of data gathering experiments performed in the T4 shock tunnel. One of the aims of the
%study is to compare flight test data against data obtained in the tunnel and verify that data
%obtained using the T4 shock tunnel is representative real flight conditions. As such, the
%shock tunnel nozzle that produces the experimental test flow has to be designed so that it
%reproduces the same flow conditions experienced in flight. At the time of designing the
%nozzle, the average estimated flight conditions through the flight test were those shown in
%Table 1.


%---------------------------------------------------------------------------------
\section{Design methodology}
\label{sec:nozzle-design}
%
The design methodology for the new Mach\,7 nozzle follows that used by  
\shortciteB{Craddock2000} in the design of the Mach\,7.6 axisymmetric contoured 
nozzle for the T4 shock tunnel facility. This methodology involves the coupling 
of a CFD solver with an optimisation algorithm to generate a nozzle contour that
produces an outflow with the least flow angularity and the least deviations from
the desired Mach number. 

Several authors \shortcite{Korte1992,Keeling1993,Tolle1997} recommend that this 
CFD-optimiser-coupled methodology be used for the design of high Mach number 
nozzles because it generates a nozzle contour that produces a more uniform 
outflow than that designed by the conventional Method-of-Characteristics (MOC) 
methodology. In low Mach number nozzles, where boundary layers are thin, the 
location where the flow characteristics reflect is closely approximated by the 
inviscid contour as assumed by the MOC method \shortcite{Craddock2000}. However, 
for high Mach number nozzles where boundary layers are thick, the flow 
characteristics effectively reflect in the region between the wall and the 
inviscid contour, as shown in Figure~\ref{f:characteristic-lag}. This causes the 
actual reflected characteristic to lag the design reflected characteristic 
\shortcite{Candler1991}. Nozzles designed using the conventional MOC methodology 
do not account for this shift in the reflection of the flow characteristics. 
This results in the incomplete cancellation of the expansion waves in the nozzle 
which then causes the nozzle outflow to be non-uniform. On the other hand, the
CFD-optimiser-coupled methodology used in the present report incorporates a
CFD flow solver which then allows the interaction between the core flow and the 
thick boundary layer in high Mach number nozzles to be modelled correctly. 
Nozzles that are designed using this methodology are expected to produce a more 
uniform outflow.
%
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=10cm]{figs/flow-characteristic-lag.pdf}
  \caption{Lagging of the actual characteristic from the design characteristic
           due to the reflection through a thick boundary layer on the nozzle
           wall (adapted from \protect \shortciteB{Craddock2000}).}
  \label{f:characteristic-lag}
 \end{center}
\end{figure}
%

In the design of the Mach\,7.6 axisymmetric contoured nozzle for the T4 shock 
tunnel facility, \shortciteB{Craddock2000} coupled the \texttt{sm3d} CFD flow
solver with the optimisation algorithm of \shortciteB{Nelder1965}. However, 
because the \texttt{sm3d} flow solver is now obsolete, \texttt{NENZFr} is used 
instead for the design of the new Mach\,7 nozzle. \texttt{NENZFr}, which stands
for \textit{Non-Equilibrium NozZle Flow - Reloaded}, comprises of a set of 
Python scripts and template files that coordinate the running of a space-marched 
nozzle simulation using the \texttt{Eilmer3} CFD flow solver. More details on 
\texttt{NENZFr} and \texttt{Eilmer3} can be found in the reports by 
\shortciteB{Doherty2011}, \shortciteB{Jacobs2008} and \shortciteB{Jacobs2010}. 
The optimisation algorithm of Nelder \& Mead, which has already been implemented 
in the \texttt{nelmin.py} script, can be found in the \texttt{cfcfd3/lib/cfpylib/nm} 
folder in the \texttt{cfcfd3} package. Details for accessing the \texttt{cfcfd3} 
package can be found on the website \texttt{http://www.mech.uq.edu.au/cfcfd/}.

%\texttt{NENZFr} is chosen over 
%\texttt{sm3d} because it has a more up-to-date chemistry database and is more maintained
%than \texttt{sm3d}. Even though \texttt{NENZFr} uses the time-accurate \texttt{Eilmer3} 
%code, it has a quasi-space-marching capability that can be used in parallel mode to
%accelerate the simulations.


\subsection{Target nozzle-exit conditions and design constraints}
\label{sec:nozzle-design:target-conds-and-constraints}
%
The target conditions for the testing of the HIFiRE 8 engine are shown in 
Table~\ref{t:flight-test-conds}. These conditions are the target nozzle
outflow conditions for the new T4 Mach\,7 nozzle. 
%
\begin{table}[htbp]
 \begin{small}
  \begin{center}
  \caption{Target conditions for the testing of the HIFiRE 8 engine.}
  \label{t:flight-test-conds}
  \vspace{2mm}
  \begin{tabular}{@{}c@{}@{}c@{}@{}r@{}@{}l@{}|@{}c@{}@{}c@{}@{}r@{}@{}l@{}@{}c@{}}%{cccc}
  \hline\hline\noalign{\smallskip}
  \hspace{5mm} & Flow      &             &              & \hspace{5mm} & Flow      &             &             & \hspace{5mm} \\
               & parameter & \multicolumn{2}{c|}{Value} &              & parameter & \multicolumn{2}{c}{Value} &              \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
  & $M_\infty$     & 7.0    &                & & $h_\infty$  & 28.56   & \,\,km  & \\
  & $q_\infty$     & 50     & \,\,kPa        & & $u_\infty$  & 2105.88 & \,\,m/s & \\
  & $H_\infty$     & 2.444  & \,\,MJ/kg\,\,  & & $a_\infty$  & 300.84  & \,\,m/s & \\
  & $p_{0,\infty}$ & 6.035  & \,\,MPa        & & $p_\infty$  & 1.4577  & \,\,kPa & \\
  & $T_{0,\infty}$ & 2432.2 & \,\,K          & & $T_\infty$  & 225.207 & \,\,K   & \\
  \noalign{\smallskip}\hline\hline
  \end{tabular}
  \end{center}
 \end{small}
\end{table}
%

In addition, there are two additional design constraints for the new Mach\,7 
nozzle. The first design constraint is that the exit diameter of the internal 
flowpath of the new nozzle has to be within +\,5\,mm of that of the existing 
Mach\,7.6 nozzle. This is to ensure that the new nozzle can utilise the same 
test-section adaptor plate as that used for the Mach\,7.6 nozzle.

The second design constraint is that of the length of the internal flowpath 
of the nozzle. The choice of the nozzle length is an important factor in the 
design of a new nozzle. For a nozzle with a fixed area ratio, a short nozzle 
means a larger expansion angle. Theoretically, the maximum divergence angle 
is given by one-half of the Prandtl-Meyer function which equates to about 
45$^{\circ}$ for a Mach\,7 flow \shortcite{Jacobs1991a}. However, large 
divergence angles will produce poor test flows because of disturbances from 
strong viscous/inviscid interactions \shortcite{Craddock1999}. Longer nozzles,
on the other hand, require longer durations to start up than short nozzles. 
This is especially disadvantageous in hypersonic impulse facilities because 
it limits the already-short test time durations. For the T4 Mach\,7.6 nozzle, 
the nozzle length of 1.11\,m was dictated by the maximum length of the 
aluminium ingot that was to be used in the manufacture of the nozzle. Since 
the chosen nozzle length for the T4 Mach\,7.6 nozzle produced an test core 
that is sufficiently large and uniform, it was decided that an initial 
estimate of the nozzle length for the new Mach\,7 nozzle can be made by 
scaling with the design Mach number. The scaled nozzle length for the new 
Mach\,7 nozzle is 1.0\,m. As shown in the numerical results in 
Section~\ref{sec:nozzle-design:optimisation}, the chosen nozzle length for 
the new nozzle provides a test core that is sufficiently large and uniform.


\subsection{Initial nozzle contour}
\label{sec:nozzle-design:initial-contour}
%
To start the optimisation, an initial contour for the nozzle is needed. The 
easiest way to obtain an initial contour is to scale an existing nozzle 
contour to reflect the area ratio, nozzle length and nozzle-exit diameter 
needed for the new nozzle. The other alternative is to use a MOC-generated
contour that has been corrected for the displacement thickness of the 
boundary layer that develops on the nozzle wall.

%Before the optimisation loop can be started, an initial contour for the nozzle is
%needed. The easiest way is to scale any existing nozzle contour to reflect the
%area ratio, nozzle length and nozzle-exit diameter needed. However, the use of this
%method increases the risks of the Nelder and Mead optimiser to get caught in a local
%minima. Even if the Nelder and Mead optimiser does converge to a global minima, the
%use of this method to generate an initial nozzle contour causes the optimiser to
%use more function evaluations to converge to the desired profile. Using a good 
%estimate of the initial contour negates these disadvantages. A good estimate of
%the initial contour can be generated by applying the more traditional nozzle design
%technique - the Method-of-Characteristics (MOC) method. The MOC method generates an
%inviscid contour that can then be corrected for the displacement thickness of the
%boundary layer that develops on the nozzle wall. 

For the current study, two optimisation runs were conducted - one started with
a nozzle contour that has been geometrically scaled from the contour of the 
Mach\,7.6 nozzle, and the other started with a nozzle contour that has been 
generated by the MOC method and corrected for boundary layer displacement 
thickness. Detailed descriptions of how an initial contour is generated by 
both the geometrical-scaling method and the MOC method can be found in 
Appendix~\ref{app:initial-contour}. The results from the optimisation runs 
show that, by starting the optimisation from the nozzle contour that has been 
scaled from the Mach\,7.6 nozzle, the final optimised nozzle contour produces 
nozzle-exit conditions that are closer to the design target parameters. A more 
detailed discussion of the comparison of the nozzle-exit conditions from both 
optimisation runs is presented in Appendix~\ref{app:opt-run-with-different-initial-contour}. 
Note that only results from the optimisation run that has been started with the 
scaled nozzle contour are presented in Section~\ref{sec:nozzle-design:optimisation-results}.

The setup for the optimisation run for the design of the new nozzle requires 
that the initial contour be specified as design variables. This is done by 
specifying the initial contour as a B\`ezier curve with $n$ number of control 
points. The control points are obtained by fitting a B\`ezier curve to the 
initial contour using a curve-fitting code written by \shortciteB{Pastva1998}.
For the initial contour used in this study, a 7$^{th}$-degree B\`ezier curve 
was fitted to within 1$\times$10$^{-9}$\,m of the initial contour. An 
additional B\`ezier control point was also added upstream of the first control 
point to ensure that the start of the nozzle contour is parallel to the nozzle axis. 


\subsection{Determination of nozzle-throat conditions}
\label{sec:nozzle-design:nozzle-throat-conditions}
%
Another step which is required before the optimisation can be started is the 
determination of nozzle-throat conditions that would give the target conditions
at the exit of the nozzle. The nozzle-throat conditions are estimated using an
iterative process, as described.
%
\begin{enumerate}
 \item Start with an initial guess for the static pressure, static temperature 
       and flow velocity at the throat of the nozzle. These values can be 
       estimated by isentropically compressing the target nozzle-exit flow 
       given in Table~\ref{t:flight-test-conds} from Mach\,7 to Mach\,1.
 \item Use the estimated conditions as inflow conditions for a \texttt{NENZFr} 
       simulation that is set up with the parameters described in 
       Section~\ref{sec:nozzle-design:NENZFr-parameters}. 
       The nozzle contour that is used for the \texttt{NENZFr} simulation is 
       that generated in Section~\ref{sec:nozzle-design:initial-contour}.
 \item Compare the mass-flow-weighted averaged conditions in the test core at
       the nozzle-exit plane from this simulation with the target conditions 
       in Table~\ref{t:flight-test-conds}.
 \item If the values do not match, adjust the flow conditions at the throat, 
       and repeat Steps 2 and 3 until the flow conditions match. Because the
       flow encounters aerothermodynamic losses through the nozzle, the static
       pressure and static temperature at the nozzle throat has to be increased 
       (rather than decreased) for this step.
\end{enumerate}
%
The flow conditions at the throat of the nozzle that have been approximated 
using this approach are summarised in Table~\ref{t:throat-conditions}. The
flow conditions and gas composition in the nozzle-supply region, which are 
shown in Table~\ref{t:supply-conditions}, are estimated by assuming a 
hypothetical isentropic compression (occurring in thermal and chemical 
equilibrium) of the flow conditions from the nozzle throat to the 
nominally-stagnant nozzle-supply region.
%
\begin{table}[htbp]
 \begin{small}
  \begin{center}
  \caption{Estimated flow conditions at the throat of the nozzle.}
  \label{t:throat-conditions}
  \vspace{2mm}
  \begin{tabular}{@{}c@{}@{}l@{}@{}r@{}@{}l@{}@{}c@{}@{}}
  \hline\hline\noalign{\smallskip}
  \hspace{5mm}   &  Parameter \hspace{5mm}  &   \multicolumn{2}{c}{Value}  & \hspace{5mm}    \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
  & $p_{throat}$    & 4.55    & \hspace{1mm} MPa   &  \\
  & $T_{throat}$    & 1861.7  & \hspace{1mm} K     &  \\
  & $u_{throat}$    & 828.8   & \hspace{1mm} m/s   &  \\
  \noalign{\smallskip}\hline\hline
  \end{tabular}
  \end{center}
 \end{small}
\end{table}
%
\begin{table}[htbp]
 \begin{small}
  \begin{center}
  \caption{Estimated flow conditions and gas compositions in the nozzle-supply region.}
  \label{t:supply-conditions}
  \vspace{2mm}
  \begin{tabular}{@{}c@{}@{}l@{}@{}r@{}@{}l@{}@{}c@{}@{}}
  \hline\hline\noalign{\smallskip}
  \hspace{5mm}   &  Parameter \hspace{5mm}  &   \multicolumn{2}{c}{Value}  & \hspace{5mm}    \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
  & $p_{s}$         & 8.32    & \hspace{1mm} MPa   &  \\
  & $T_{s}$         & 2122.7  & \hspace{1mm} K     &  \\
  & $\alpha_{CO_2}$ & \multicolumn{2}{c}{0.000485}         &  \\
  & $\alpha_{NO}$   & \multicolumn{2}{c}{0.010668}         &  \\
  & $\alpha_{Ar}$   & \multicolumn{2}{c}{0.012916}         &  \\
  & $\alpha_{N_2}$  & \multicolumn{2}{c}{0.750130}         &  \\
  & $\alpha_{O_2}$  & \multicolumn{2}{c}{0.225530}         &  \\
  & $\alpha_{NO_2}$ & \multicolumn{2}{c}{0.000211}         &  \\
  \noalign{\smallskip}\hline\hline
  \end{tabular}
  \end{center}
 \end{small}
\end{table}
%


\subsection{Optimisation of the initial contour}
\label{sec:nozzle-design:optimisation}
%
Following \shortciteB{Craddock2000}, the optimisation problem was formulated 
using seven design variables that defined the shape of the expansion contour, 
and an objective function that defined the variation in Mach number from a 
prescribed goal and variation in flow angle across the test core at the exit 
plane of the nozzle. The radial position of the design variables were then 
optimised to minimise the objective function.

The expansion contour was described by a single continuous B\`ezier curve 
with 9 control points as shown in Figure~\ref{f:initial-contour-with-bezier-pts}.
%
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=16cm]{figs/layout-contour-bezier-pts.pdf}
  \caption{Layout of the B\`ezier control points that define the nozzle contour.}
  \label{f:initial-contour-with-bezier-pts}
 \end{center}
\end{figure}
% 
The radial positions of the first two control points were held constant at 
the nozzle throat radius and the radial positions of the remaining seven 
control points were free to move. The axial positions of all the control 
points were fixed in a distribution along the length of the nozzle that was 
slightly clustered towards the nozzle throat. The differences in radial 
distances between each pair of B\`ezier control points that were free to 
move ($Y_1 - r_{throat}$, $Y_2 - Y_1$, ....) were used as design variables. 
This approach makes the design variables resemble wall slopes and improves 
the convergence of the design procedure \shortcite{Korte1992}.

The objective function was defined so that the optimization algorithm 
would attempt to find a nozzle shape that produced a flow with a minimum 
of variation in Mach number and flow angle across the core flow at the 
nozzle-exit plane. All of the computational cells from the axis to the 
edge of the core flow\footnote{The edge of the core flow was defined as 
the radial position on the outflow plane where the gradient 
$\partial M / \partial r$  became less than $-$20.0 along a radial line 
moving out from the axis (approximate edge of the boundary layer.} at the
exit plane were used to evaluate the objective function which was defined as,
%
\begin{equation}
 \label{e:objective-function}
 \mathrm{Obj} \left( dv \right) = \left( f_{\theta} + f_{M} \right)^2
\end{equation}
%

The two functions defining the variation in flow angle, $\theta$, and the 
distribution in Mach number, were
%
\begin{equation}
 \label{e:secondary-obj-function-flow-divergence}
 f_{\theta} = \frac{\phi_{\theta}^2}{N} \sum\limits_{j=1}^N \left( v_j / u_j \right)^2
\end{equation}
%
\begin{equation}
 \label{e:secondary-obj-function-Mach}
 f_{M} = \frac{\phi_{M}^2}{N} \sum\limits_{j=1}^N \left( M_{x,j} - M_{\mathrm{design}} \right)^2
 \vspace{5mm}
\end{equation}
%
where the symbol $N$ denotes the number of cells in the core flow. Two 
weighting parameters, $\phi_{\theta}$ and $\phi_M$, were used to scale the 
contributions of the flow angle variation function $f_{\theta}$ and Mach 
number variation function $f_M$. The scaling parameters were set so that both
functions would evaluate to 1 or less if all of the cells within the core 
flow have a variation in Mach number and flow angle less than a prescribed 
target. 
%The optimization algorithm would then interpret both targets as 
%equally important for achieving a satisfactory nozzle shape. 
The targets were set to a variation of Mach number across the core flow at the 
exit plane of less than 0.01 and a variation of flow angularity less than 0.02$^{\circ}$,
as per those set for the design of the Mach\,7.6 nozzle by \shortciteB{Craddock2000}.
When or if the optimisation algorithm found a design solution that achieved 
these targets, the optimisation algorithm was stopped. These targets are 
``ideal'' and were set to a very high level to improve the convergence of 
the optimisation search algorithm. Note that nozzle-exit plane flow 
variations of this order can not be easily measured in pulse-flow wind 
tunnels with the current generation of flow measurement instruments.

The weighting parameters are equal to the inverse of the targets or design 
goals such that,
%
\begin{equation}
 \label{e:weighting-params-flow-divergence}
 \phi_{\theta} = \frac{1}{\mathrm{tan}\left( 0.02 \right)} = 2.86 \times 10^3
\end{equation}
%
\begin{equation}
 \label{e:weighting-params-Mach}
 \phi_{M} = \frac{1}{0.01} = 100
 \vspace{5mm}
\end{equation}
%

The initial perturbations of the design variables for the optimisation were
set to the same values as those used by \shortciteB{Craddock2000} - 3\,mm 
for the first two upstream design variables and 5\,mm for the remaining five
design variables. The parameters for the Nelder \& Mead optimiser are listed 
in Table~\ref{t:params-Nelder-Mead-opt}.
%
\begin{table}[htbp]
 \begin{small}
  \begin{center}
  \caption{Input parameters for the Nelder \& Mead optimiser.}
  \label{t:params-Nelder-Mead-opt}
  \vspace{2mm}
  \begin{tabular}{@{}c@{}@{}l@{}@{}c@{}@{}c@{}@{}c@{}@{}}
  \hline\hline\noalign{\smallskip}
  \hspace{5mm}   &  Parameter     &   \hspace{5mm} Notation \hspace{5mm}    &   Value    & \hspace{5mm}    \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
  & Terminating limit for the standard                      & \texttt{tol}        &    1.0    &  \\
  & deviation of the simplex function values                &                     &           &  \\ \noalign{\smallskip}
  & Number of steps between convergence checks \hspace{5mm} & \texttt{n\_check}   &    5      &  \\ \noalign{\smallskip}
  & Maximum number of function evaluations                  & \texttt{max\_fe}    &    500    &  \\ \noalign{\smallskip}
  & Magnitude of the perturbations for                      & \texttt{delta}      &    0.001  &  \\ 
  & checking a local minimum                                &                     &           &  \\ \noalign{\smallskip}
  & Coefficient for locating new index (reflect)            & \texttt{Kreflect}   &    1.0    &  \\ \noalign{\smallskip}
  & Coefficient for locating new index (extend)             & \texttt{Kextend}    &    2.0    &  \\ \noalign{\smallskip}
  & Coefficient for locating new index (contract)           & \texttt{Kcontract}  &    0.5    &  \\
  \noalign{\smallskip}\hline\hline
  \end{tabular}
  \end{center}
 \end{small}
\end{table}
%


\subsection{NENZFr parameters}
\label{sec:nozzle-design:NENZFr-parameters}
%
The computational grid for the optimisation problem has 300 cells in the 
axial direction and 40 cells in the radial direction. As shown in 
Figure~\ref{f:NENZFr-grid}, grid clustering is employed near the throat and 
initial expansion regions to resolve the larger flow gradients expected in 
these regions. 
%
\begin{figure}[htbp]
 \begin{center}
  \includegraphics[width=16cm]{figs/nozzle-optimisation-grid.pdf}
  \caption{Computational grid for each \texttt{NENZFr} simulation. Close-up 
           view of the grid (displayed in the inset) shows the orthogonality 
           of the grids to the nozzle wall.}
  \label{f:NENZFr-grid}
 \end{center}
\end{figure}
%
Grid clustering is also employed near the nozzle wall to ensure sufficient 
resolution of the boundary layer. In addition, the grids near the nozzle wall 
are also configured to be orthogonal to the wall to ensure that the near-wall
flow parameters are properly approximated by flow solver. The wall of the
nozzle is assumed to be at a constant temperature of 300\,K. 

The conditions for the inflow of air through the throat of the nozzle are as 
stated in Table~\ref{t:throat-conditions}. The flow of air through the nozzle 
is assumed to be in thermal and chemical equilibrium. An additional simulation 
conducted with finite-rate chemistry showed similar results to that conducted 
with chemical equilibrium. Effects of thermal non-equilibrium flow were not 
accounted for in the simulations.

The turbulence model used in the simulations is Wilcox's 2006 $k$-$\omega$ 
turbulence model \shortcite{Wilcox2006}. The turbulence intensity of the 
inflow to the nozzle is set to 5\% and the ratio of turbulent-to-laminar 
viscosity of the inflow to the nozzle is set to 100. The resulting inflow 
turbulence kinetic energy $k$ and specific dissipation rate $\omega$ are 
derived from the turbulence intensity and the ratio of turbulent-to-laminar 
viscosity \shortcite{Chan2012a}. In addition, turbulence is assumed to start 
at the throat of the nozzle. Simulations with turbulence starting at 0\,mm, 50\,mm,
100\,mm and 150\,mm from the throat showed that varying the transition location did 
not significantly affect the flow conditions at the exit plane of the nozzle.

To speed up the convergence of the simulations, \texttt{NENZFr} was also 
run in a multi-processor quasi-block-marching mode. More details of the
quasi-block-marching capability of \texttt{NENZFr} is described in the
report by \shortciteB{Doherty2011}.


\subsection{Optimisation results}
\label{sec:nozzle-design:optimisation-results}
%
The optimisation run converged at 115 iterations with an objective value of 
2.9. As mentioned before in Section~\ref{sec:nozzle-design:optimisation}, 
the target objective value of 1.0 was set to improve the convergence of the 
optimisation algorithm, and can only be achieved for an ideal case. It is
hence not surprising that the converged objective value for the present 
optimisation run did not reach the target objective value of 1.0. The 115 
iterations took approximately 56\,hours to complete when run parallel on 
8 Intel L5520 2.27\,GHz processors. The total number of function evaluations 
(\texttt{NENZFr} runs) was 383.

The optimised nozzle contour has a nozzle-exit diameter of 273.2\,mm. The 
maximum slope of the nozzle contour (relative to the nozzle axis) is 
20$^\circ$ and occurs approximately 42\,mm downstream of the nozzle throat.
The B\`ezier control points and physical coordinates for the optimised 
nozzle contour are shown in Table~\ref{t:Bezier-control-points} and 
Appendix~\ref{app:nozzle-coordinates} respectively. 
%
\begin{table}[htbp]
 \begin{small}
  \begin{center}
  \caption{B\`ezier control points of the optimised Mach\,7 nozzle.}
  \label{t:Bezier-control-points}
  \vspace{2mm}
  \begin{tabular}{@{}c@{}@{}c@{}@{}c@{}@{}c@{}@{}c@{}@{}}
  \hline\hline\noalign{\smallskip}
  \hspace{12mm}   &  $x$, m  &   \hspace{10mm}  & $y$, m &  \hspace{12mm} \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
  & 0.000000e+00 & & 1.050000e-02 & \\
  & 3.000000e-02 & & 1.050000e-02 & \\
  & 1.200000e-01 & & 6.750100e-02 & \\
  & 1.600000e-01 & & 5.080100e-02 & \\
  & 2.600000e-01 & & 9.194200e-02 & \\
  & 4.000000e-01 & & 1.103570e-01 & \\
  & 5.700000e-01 & & 1.179570e-01 & \\
  & 7.700000e-01 & & 1.355220e-01 & \\
  & 1.000000e+00 & & 1.365830e-01 & \\
  \noalign{\smallskip}\hline\hline
  \end{tabular}
  \end{center}
 \end{small}
\end{table}
%

The radial distributions of Mach number, flow angularity, static pressure 
and Pitot pressure across the nozzle-exit plane for the optimised nozzle 
contour are shown in Figure~\ref{f:nozzle-exit-profiles}. The flow profiles
in Figure~\ref{f:nozzle-exit-profiles} are from simulations with three
grid configurations.
%
\begin{figure}[htbp]
 \begin{center}
  \subfloat[Mach number.]{
   \includegraphics[width=7.9cm]{plots/profile-Mach.pdf}
   \label{f:nozzle-exit-Mach}
  }
  \subfloat[Flow angularity.]{
   \includegraphics[width=7.9cm]{plots/profile-flow-divergence.pdf}
   \label{f:nozzle-exit-flow-angularity}
  }
  \quad
  \subfloat[Static pressure.]{
   \includegraphics[width=7.9cm]{plots/profile-staticP.pdf}
   \label{f:nozzle-exit-static-pressure}
  }
  \subfloat[Pitot pressure.]{
   \includegraphics[width=7.9cm]{plots/profile-Pitot.pdf}
   \label{f:nozzle-exit-Pitot-pressure}
  }
  \caption{Flow profiles at the exit of the nozzle. The coarse grid, which 
           was the grid used for the optimisation run, has 40 radial cells 
           and 300 axial cells. The medium grid has 80 radial cells and 600 
           axial cells. The fine grid has 120 radial cells and 900 axial 
           cells.}
  \label{f:nozzle-exit-profiles}
 \end{center}
\end{figure}
%
These profiles show that the medium grid produces results that are 
sufficiently grid-converged for the analysis conducted in the present 
report. As such, further discussions in the present report are made based 
on this grid.

The plots in Figure~\ref{f:nozzle-exit-profiles} show that, for all grid 
configurations, the maximum test core diameter at the nozzle-exit plane is 
approximately 200\,mm. Mass-flow-weighted averaged values of flow properties 
in the test core for the medium grid are summarised in 
Table~\ref{t:nozzle-exit-flow-stats}. To demonstrate the uniformity of the
nozzle-exit flow, the maximum and minimum deviations from the 
mass-flow-weighted averaged flow properties in the test core are also 
included in Table~\ref{t:nozzle-exit-flow-stats}. Other than the $\pm$\,3\%
deviation in the static pressure and the $\pm$\,2\% deviation in the Pitot
pressure, the other flow parameters have deviations of less than $\pm$\,1\%
in the test core at the nozzle-exit plane. This thus shows that flow within 
the test core is sufficiently uniform. In addition, a comparison of the
mass-flux-weighted averaged values of flow properties in the test core with
the target conditions (as shown in Table~\ref{t:flight-test-conds}) is also 
shown in Table~\ref{t:nozzle-exit-flow-stats}. The results demonstrate that 
the optimisation process produces a nozzle-exit outflow that matches to 
within 1\% of the target conditions.
%
\begin{table}[htbp]
 \begin{small}
  \begin{center}
  \caption{Mass-flow-weighted averaged values of flow properties in the 
           uniform test core. The maximum and minimum deviations from the 
           mass-flow-weighted averaged flow properties in the test core 
           are also included.}
  \label{t:nozzle-exit-flow-stats}
  \vspace{2mm}
  \begin{tabular}{@{}c@{}@{}c@{}@{}c@{}@{}c@{}|@{}c@{}@{}c@{}@{}c@{}@{}c@{}@{}c@{}}
  \hline\hline\noalign{\smallskip}
  \hspace{5mm} &           &        &  Mass-flow & Max-Min      & Max-Min       &        & Deviation        & \hspace{5mm} \\
               & Flow      &        &  -weighted & deviation    & deviation     & Target & from target      &              \\  
               & parameter &  Units &  value     & (absolute)   & (relative)    & Value  & value (relative) &              \\
  \noalign{\smallskip}\hline\noalign{\smallskip}
               & Mach number      &    -      &  7.0215    & $\pm$\,0.03 & $\pm$\,0.4\% &  7.0    & +\,0.3\%           &              \\
               & Flow divergence  &  degrees  &  0.006     & $\pm$\,0.13 & -           &  0.0   & -           &              \\
               & Static pressure  &    kPa    &  1.4435    & $\pm$\,0.041 & $\pm$\,2.8\%    &  1.4577 & $-$\,1.0\%           &              \\  
               & Static temperature &    K    &  223.8     & $\pm$\,1.9   & $\pm$\,0.8\%    &  225.2  & $-$\,0.6\%           &              \\ 
               & Axial velocity   &    m/s    &  2106      & $\pm$\,0.9   & $\pm$\,0.04\%   &  2105.9 & \textless\,0.1\%        &              \\ 
               & Pitot pressure   &    kPa    &  92.324    & $\pm$\,1.8   & $\pm$\,1.9\%    &  -      &  -               &              \\  
  \noalign{\smallskip}\hline\hline
  \end{tabular}
  \end{center}
 \end{small}
\end{table}
%

% nozzle-exit-core.statsMass for a core radius of 0.1 m
%
%       variable    mean-value        minus        plus    std-dev
%-----------------------------------------------------------------
%            rho      0.022474     -0.000436   0.000472   0.000305
%          vel.x          2106        -0.906      0.852      0.574
%          vel.y        0.2289         -4.28        4.7       3.11
%              p        1443.5         -40.2       42.7       27.4
%              a        299.94         -1.27       1.26      0.813
%             mu    1.4777e-05     -9.22e-08   9.15e-08    5.9e-08
%           k[0]      0.020516     -0.000136   0.000135   8.68e-05
%           mu_t    1.2222e-06     -3.84e-08   5.82e-08   2.93e-08
%            k_t     0.0013781     -4.33e-05   6.57e-05    3.3e-05
%            tke       0.98419       -0.0452     0.0886     0.0477
%          omega         18094          -550        989        584
%   massf[0]-LUT             1             0          0          0
%           e[0]    1.6084e+05     -1.37e+03   1.36e+03        875
%           T[0]         223.8          -1.9       1.89       1.22
%        M_local        7.0215       -0.0324     0.0327     0.0209
%        pitot_p         92324     -1.73e+03   1.87e+03   1.21e+03
%        total_p    6.0628e+06     -2.18e+04   6.08e+03   5.69e+03
%        total_h    2.4427e+06          -126       50.3       35.4
%-----------------------------------------------------------------


Another parameter that is of interest is the extent of the test core that 
the optimised nozzle contour provides. Figure~\ref{f:full-simulation} shows
plots of Pitot pressure contours that are generated from simulations of the 
Mach\,7 and Mach\,7.6 nozzles and the test section of the T4 shock tunnel 
facility. Note that although this axisymmetric simulation does not model the 
true test section of the T4 shock tunnel (the actual test section has a 
square cross-section), it still does provide a reasonable estimate of the 
flowfield.
%
\begin{figure}[htbp]
 \begin{center}
  \subfloat[Mach 7 nozzle.]{
   \includegraphics[width=16cm]{figs/core-flow-M7.pdf}
   \label{f:full-simulation-Mach7}
  }
  \quad
  \subfloat[Mach 7.6 nozzle.]{
   \includegraphics[width=16cm]{figs/core-flow-M8.pdf}
   \label{f:full-simulation-Mach7.6}
  }
  \caption{Contours of Pitot pressure for the Mach\,7 and the Mach\,7.6 nozzles (to scale).}
  \label{f:full-simulation}
 \end{center}
\end{figure}
%
It can be seen that the extent of core flow area is similar for both 
nozzles - the Mach\,7 nozzle produces a core flow diamond with a maximum
axial length of 1.1\,m and a maximum diameter of 0.2\,m, while the Mach\,7.6 
nozzle produces a core flow diamond with a maximum axial length of 1.2\,m and 
a maximum diameter of 0.2\,m.


%
%%---------------------------------------------------------------------------------
%\section{Sensitivity study}
%\label{sec:sensitivity-study}
%%
%Sensitivity of the quality of the nozzle outflow to the varying nozzle-supply 
%conditions from using different diaphragms..?


%---------------------------------------------------------------------------------
\section{Manufacture}
\label{sec:nozzle-manufacture}
%
The mechanical design of the new Mach\,7 nozzle is based on that of the T4 
Mach\,7.6 nozzle. Most features of the design are kept the same, with exception to 
the following features.

\begin{itemize}
 \item The subsonic contraction and first supersonic contraction components are 
       now made from copper instead of beryllium-copper due to health and safety 
       issues related to the machining of beryllium-copper.
 \item The mechanical design and relevant o-rings for the subsonic contraction 
       and first supersonic contraction components are changed to accommodate the 
       larger throat diameter of the new Mach\,7 nozzle.
 \item The o-rings for the nozzle block, second and third supersonic expansion 
       components are changed to accommodate the different internal contour of 
       the new Mach\,7 nozzle.
\end{itemize}

This nozzle is manufactured at the UQ-EAIT workshop by Robert McGregor. The 
manufacturing drawings and details of the relevant accessories (o-rings and 
fasteners) can be found in Appendix~\ref{app:manufacturing-drawings}.


%---------------------------------------------------------------------------------
\section{Conclusion}
\label{sec:conclusion}
%
CONCLUSION.....


%---------------------------------------------------------------------------------
%\section{Experimental verification of the nozzle design}
%\label{sec:expt-verification}
%%
%INCLUDE RESULTS OF PITOT AND CONE PROBE SURVEYS OF THE NOZZLE.

%---------------------------------------------------------------------------------

\newpage
%\bibliographystyle{unsrt}
\bibliography{phd_bibliography}
\bibliographystyle{newapa}  % When using newapa bib style, remember to include
                            % \usepackage{newapa} in the preamble.


\newpage


%---------------------------------------------------------------------------------
%  START OF THE APPENDICES ...
%---------------------------------------------------------------------------------
\appendix

%---------------------------------------------------------------------------------
\newpage
\section{Generating the initial nozzle contour}
\label{app:initial-contour}
%

\subsection{Geometrical-scaling method to generate an initial contour}
\label{app:initial-contour:geometric-scaling}
%

\subsection{The use of Method-Of-Characteristics to generate an initial contour}
\label{app:initial-contour:MOC-method}
%
Before the optimisation loop can be started, an initial contour for the nozzle is
needed. The easiest way is to scale any existing nozzle contour to reflect the
area ratio, nozzle length and nozzle-exit diameter needed. However, the use of this
method increases the risks of the Nelder and Mead optimiser to get caught in a local
minima. Even if the Nelder and Mead optimiser does converge to a global minima, the
use of this method to generate an initial nozzle contour causes the optimiser to
use more function evaluations to converge to the desired profile. Using a good 
estimate of the initial contour negates these disadvantages. A good estimate of
the initial contour can be generated by applying the more traditional nozzle design
technique - the Method-of-Characteristics (MOC) method. The MOC method generates an
inviscid contour that can then be corrected for the displacement thickness of the
boundary layer that develops on the nozzle wall. 

A inviscid \texttt{NENZFr} simulation of the inviscid contour is then conducted to extract
flow properties along the nozzle wall. The distribution is assumed to be boundary layer 
edge properties and is passed into the \texttt{bl.exe} code written by Smart REF?? This code
returns values for displacement thickness along the nozzle wall. The distribution of 
displacement thickness is then used to offset the inviscid contour to accommodate for the 
boundary layer growth. The input script to this code is shown in Figure??? The corrected
contour is then scaled down only in the $x$-direction to a nozzle length of 1.0\,m. The 
scaled and corrected contour, called MOC/BL contour, is then fed to the optimiser.

To start a MOC simulation, an estimate of the inflow conditions and the throat diameter
is needed. Following the procedures of \cite{Jacobs1989}, the MOC calculation is started 
at the end of the conical expansion area of the nozzle. REASONS?? REF?? ADD PARA TO 
DESCRIBE SEMI-CONICAL CONTOURED NOZZLES WITH EMPHASIS ON THE DIFFERENT REGIONS??? 
Although it was mentioned in Section~\ref{sec:nozzle-design:target-conds-and-constraints}
that the nozzle-supply conditions cannot simply be assumed to be stagnation 
conditions of the target nozzle-exit conditions, this stagnation conditions can be 
used as initial nozzle-supply conditions for the design process (? Seems that the 
stagnation conditions shots are not significantly different from the nozzle-supply 
conditions at lower stagnation enthalpies - see shot 7961). 

The throat diameter can be estimated using the \texttt{nozzle\_equilibrium\_calc.py}
script. The inputs to this script are the nozzle-supply pressure, temperature,
target Mach number, nozzle-exit diameter and nozzle length. The script uses \texttt{CEA2}
to work out the other properties in the nozzle-supply region. These properties are
then isentropically expanded over a small axial length of the nozzle. The expanded
flow properties are then re-entered into \texttt{CEA2} to extract new thermodynamic
properties for the next expansion step. For the type of application here, the use
of thermodynamic equilibrium to work out the properties is mandatory. Using the 
isentropic $A$/$A^{\star}$-$M$ relation and thermodynamic properties from \texttt{CEA2}, 
the flow is then expanded through the sonic throat until the exit of the nozzle by 
stepping through infinitesimally-small steps of Mach number. The exit of the nozzle 
is defined as when the Mach number reaches the target Mach number. Using the given
nozzle-exit diameter and the calculated area-ratio, the diameter of the nozzle throat
can then be estimated. The displacement thickness can then be estimated using Blasius'
theory for flat plates. This value is then doubled and used to reduce the initially
estimated nozzle throat diameter to account for boundary layer growth (the nozzle-exit
diameter is fixed, so the nozzle throat diameter has to be reduced to keep the area-ratio
the same). The resulting throat diameter is 0.02151\,m.

With the throat diameter, the inflow properties needed for the MOC calculation can
then be estimated. This can be done by using the \texttt{find-M-and-gamma-given-A-on-Astar.py}
script. *** MY SCRIPT find-M-and-gamma-given-A-on-Astar.py MAY BE WRONG!!!! ****
The inputs to this script are the same as that of the \texttt{nozzle\_equilibrium\_calc.py}
script. In addition, the divergence angle and length of the conical expansion is
also needed. Bearing in mind that the divergence angle may be changed in the optimisation
loop, we then pick a divergence angle that has been used in the design of four nozzles by 
\cite{Jacobs1989} of 14$^{\circ}$. Although not directly specified in the report, the
length of the conical expansion seems to be determined by using 8\% of the overall nozzle
length. For the new T4 Mach 7 nozzle, the target nozzle length is 1.0\,m. This results in
a conical expansion length of 0.088\,m. The \texttt{find-M-and-gamma-given-A-on-Astar.py}
script returns a Mach number of 3.77 and a ratio of specific heats of ?????. These values
together with the coordinates of the end of the conical expansion are used as input to
the MOC calculation. In addition, the source of the radial flow is assumed to be the point
where the conical expansion line intersects the axis of the nozzle. 

The MOC calculations are conducted using the \texttt{iMOC} code that has been written
by Jacobs REF?? The inputs to the program are the ratio of specific heats and Mach number 
at the exit of the conical expansion, the coordinates of the source and the exit corner 
point of the conical expansion. \texttt{iMOC} then generates the Mach number of the core
flow $M_{core}$. Because the source of the radial flow has been assumed, this source point
can be adjusted until $M_{core}$ matches that of the target Mach number. The input script
for the \texttt{iMOC} calculations are shown in Figure????. The resulting core flow starts 
at  $x$\,=\,0.36\,m and the nozzle length is 1,21812\,m. The inviscid contour has an exit
diameter of 0.24496\,m. 

A inviscid \texttt{NENZFr} simulation of the inviscid contour is then conducted to extract
flow properties along the nozzle wall. The distribution is assumed to be boundary layer 
edge properties and is passed into the \texttt{bl.exe} code written by Smart REF?? This code
returns values for displacement thickness along the nozzle wall. The distribution of 
displacement thickness is then used to offset the inviscid contour to accommodate for the 
boundary layer growth. The input script to this code is shown in Figure??? The corrected
contour is then scaled down only in the $x$-direction to a nozzle length of 1.0\,m. The 
scaled and corrected contour, called MOC/BL contour, is then fed to the optimiser.


%---------------------------------------------------------------------------------
\newpage
\section{Results from the other optimisation run}
\label{app:opt-run-with-different-initial-contour}
%
Before the

%
%%---------------------------------------------------------------------------------
%\newpage
%\section{Pastva's B\`ezier curve-fitting code}
%\label{app:bezier-curve-fitting-code}
%%
%Pastva's B\`ezier curve-fitting code


%---------------------------------------------------------------------------------
\newpage
\section{Optimisation script (.py)}
\label{app:optimisation-script}
\topbar
\lstinputlisting[language={}]{scripts/optimise_nozzle.py}
\bottombar

%%---------------------------------------------------------------------------------
%\newpage
%\section{B\`ezier control points for the nozzle contour}
%\label{app:Bezier-control-pts}
%%
%The B\`ezier control points for the Mach\,7 nozzle contour are listed here. For users
%who would like to use these control points for either their CFD simulations or for
%manufacturing purposes, the authors highly recommend that the control points be 
%taken from the master copy \texttt{contour-t4-m7.data} which can be located in the 
%\texttt{cfcfd3} package in the \texttt{cfcfd3/app/nenzfr/nenzfr\_data\_files/} folder. 
%Details for accessing the cfcfd3 package can be found on 
%\texttt{http://www.mech.uq.edu.au/cfcfd/index.html}. This is to avoid having
%multiple master copies of the control points data.
%%
%\vspace{5mm}
%\lstinputlisting[language={}]{nozzle-contour-data/Bezier-control-pts-t4-m7.data}

%---------------------------------------------------------------------------------
\newpage
\section{Coordinates for the nozzle contour}
\label{app:nozzle-coordinates}
%
The coordinates for the Mach\,7 nozzle contour are listed here. For users
who would like to use these coordinates for either their CFD simulations or for
manufacturing purposes, the authors highly recommend that the coordinates be 
taken from the master copy \texttt{contour-t4-m6.data} which can be located in the 
\texttt{cfcfd3/app/nenzfr/nenzfr\_data\_files/} folder in the cfcfd3 package. Details
for accessing the \texttt{cfcfd3} package can be found on 
\texttt{http://www.mech.uq.edu.au/cfcfd/index.html}. This is to avoid having
multiple master copies of the coordinates data.
%
\vspace{5mm}
\lstinputlisting[language={}]{nozzle-contour-data/contour-t4-m7.data}

%---------------------------------------------------------------------------------
\newpage
\section{Manufacturing drawings}
\label{app:manufacturing-drawings}

\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-10_Sheet_1.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-10_Sheet_2.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-1_Sheet_1.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-1_Sheet_2.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-2.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-3_Sheet_1.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-3_Sheet_2.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-4.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-5.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-6.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-7_Sheet_1.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-7_Sheet_2.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-8.pdf}
\includepdf[landscape]{../../project-Mach-7-nozzle/CAD-M7-nozzle/T4-M7-Nozzle-Drawings/T4-M7-9.pdf}

%---------------------------------------------------------------------------------


\end{document}
